<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>802.1x Port Authentication with ARUBA switches - Guy Evans</title>
<script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script><meta name=Description content="Sysadmin -- Net Admin -- IT Tech -- DIYer"><meta property="og:title" content="802.1x Port Authentication with ARUBA switches"><meta property="og:description" content="Imagine a situation where you have a public meeting room equipped with accessible Ethernet ports, and you want to ensure secure access to those ports. One of the options is 802.1X Port Authentication - Lets take a look at the configuration on the switch side"><meta property="og:type" content="article"><meta property="og:url" content="https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/"><meta property="og:image" content="https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/feature.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-13T14:32:51+00:00"><meta property="article:modified_time" content="2023-07-13T14:32:51+00:00"><meta property="og:site_name" content="Guy Evans"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/feature.jpg"><meta name=twitter:title content="802.1x Port Authentication with ARUBA switches"><meta name=twitter:description content="Imagine a situation where you have a public meeting room equipped with accessible Ethernet ports, and you want to ensure secure access to those ports. One of the options is 802.1X Port Authentication - Lets take a look at the configuration on the switch side"><meta name=twitter:site content="@_guyevans"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/><link rel=prev href=https://guy-evans.com/posts/2023-04-23_a-look-at-caddy-a-simple-and-fast-web-server/><link rel=next href=https://guy-evans.com/posts/2023-11-26_what-apps-i-use-in-2023/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"802.1x Port Authentication with ARUBA switches","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/guy-evans.com\/posts\/2023-07-11_802-1x-port-authentication-with-aruba-switches\/"},"genre":"posts","keywords":"802.1X, Radius, Security, Switch, Aruba, Vlan","wordcount":760,"url":"https:\/\/guy-evans.com\/posts\/2023-07-11_802-1x-port-authentication-with-aruba-switches\/","datePublished":"2023-07-13T14:32:51+00:00","dateModified":"2023-07-13T14:32:51+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Guy Evans"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Guy Evans">Guy Evans</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/about/>~ Whoami </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Select Language"><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ selected>English</option><option value=/fr/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/>Français</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Guy Evans">Guy Evans</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/about/ title>~ Whoami</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ selected>English</option><option value=/fr/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/>Français</option></select></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">802.1x Port Authentication with ARUBA switches</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Guy Evans</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-07-13>2023-07-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;760 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg data-srcset="/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg, /posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg 1.5x, /posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg 2x" data-sizes=auto alt=/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg title=/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/thomas-jensen-ISG-rUel0Uw-unsplash.jpg width=1080 height=718></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#8021x---why>802.1x - Why?</a></li><li><a href=#what-do-we-need>What do we need?</a></li><li><a href=#lets-get-configing>Let&rsquo;s get configing</a><ul><li><a href=#switch-configuration>Switch Configuration</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=8021x---why>802.1x - Why?</h2><p>In the enterprise, we often use 802.1x to secure access to wired and wireless networks. For wired networks 802.1x allows us to require authentication at the port level on a supported switch which also allows us to dynamically assign VLANs to the port or connecting device.</p><p>Imagine a situation where you have a public meeting room equipped with accessible Ethernet ports, and you want to ensure secure access to those ports. In such a scenario, you have two options to consider:</p><ol><li><p>The first option is to disable any unused ports. While this approach provides some level of security, it comes with a drawback. What if someone needs to use the port? In that case, you would have to manually log in to the switch, enable the port temporarily, and then disable it again once it&rsquo;s no longer in use. This process can be quite cumbersome and timewaster for IT staff.</p></li><li><p>The second and more efficient option is to implement 802.1X. This standard offers a superior solution by keeping the ports active at all times. With 802.1X, when a company device is plugged into the port, it will automatically gain access to the company network on the assigned VLAN. However, if an unknown device is connected, it will be assigned to a VLAN of your choice, typically a public network with only internet access. This segregation ensures that unauthorized devices cannot access the company network. The best part is that you no longer need to manually enable and disable ports whenever access is required.</p></li></ol><h2 id=what-do-we-need>What do we need?</h2><ul><li>A RADIUS server (at IP 192.168.10.2) - we are using Microsoft NPS (I won&rsquo;t be detailing the configuration of NPS here but may do so in the futur)</li><li>A Managed Switch - Could be any any managed switch which can do port authentication, I&rsquo;m doing this on an <a href=https://www.arubanetworks.com/products/switches/access/2930f-series/ target=_blank rel="noopener noreffer">ARUBA 2930F</a> (which is a nice switch by the way, if only it could make it&rsquo;s way home from work &#x1f609; &#x1f609; )</li><li>Some VLANs<ul><li>Company VLAN: 10</li><li>Public VLAN: 20</li></ul></li><li>A Windows computer</li></ul><h2 id=lets-get-configing>Let&rsquo;s get configing</h2><h3 id=switch-configuration>Switch Configuration</h3><h4 id=vlan-setup>VLAN Setup</h4><p>First thing we need to do is add the vlans if not already done. I&rsquo;ve tagged the vlans on all the ports for simplicity sake.</p><pre tabindex=0><code>vlan 10 name VLAN10_Company
vlan 10 tagged all
vlan 20 name VLAN20_Public
vlan 20 tagged all
vlan 30 name VLAN30_Phones
vlan 30 tagged all
</code></pre><h4 id=radius-server-and-authentication>Radius Server and Authentication</h4><p>Next we need to configure the remote RADIUS server (our NPS server) and tell the switch the &lsquo;secretkey&rsquo;</p><pre tabindex=0><code>radius-server host 192.168.10.2 key &#34;secretkey&#34;
</code></pre><p>Then we configure EAP-RADIUS, this enables the switch to forward the authentication packets from the clients to the Radius server.</p><p><code>aaa authentication port-access eap-radius</code></p><p>We then enable 802.1x on our switch ports, here we are doing it on a a range of ports but you can specify individual ports, or separate them with a comma. We tell the switch to put autorised clients on vlan 10 (auth-vid) and non autorised clients on vlan 20 (unauth-vid)</p><pre tabindex=0><code>aaa port-access authenticator 1-10
aaa port-access authenticator 1-10 unauth-vid 20
aaa port-access authenticator 1-10 auth-vid 10
aaa port-access authenticator active
</code></pre><p>With that our switch configuration is done. Or is it?</p><h4 id=bonus-what-about-ip-phones>(Bonus) What about IP Phones?</h4><p>You may have noticed I included a vlan for phones, as this was a huge question I had on my first roll out of 802.1x. Will I need to add each phone to our Radius server and configure each phone for the authentication or use MAB<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>?</p><p>No! Instead we will make the vlan a voice vlan with the following command which will allow the phone to use LLDP to fetch its assigned vlan bypassing its need for the authentication.</p><pre tabindex=0><code>vlan 30 voice
</code></pre><h4 id=conclusion>Conclusion</h4><p>Wired 802.1X offers port-level authentication and access control, ensuring only authorized devices can connect to the network. It enables dynamic VLAN assignment and eliminates the need for manual port management, enhancing network security.</p><p>In this blog post, I wanted to highlight the switch-side setup for 802.1X, focusing on the configuration process. When an unauthorized client is connected to the switch port, the system automatically assigns it to VLAN 10. Similarly, when a phone is plugged in, it seamlessly joins VLAN 30 without any additional setup. Moreover, authorized clients are automatically placed in VLAN 10.</p><p>In summary, wired 802.1X offers port-level authentication and access control, ensuring only authorized devices can connect to the network. It enables dynamic VLAN assignment and eliminates the need for manual port management, enhancing network security.</p><hr><p><em>Photo by Thomas Jensen @ <a href="https://unsplash.com/fr/photos/ISG-rUel0Uw?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target=_blank rel="noopener noreffer">Unsplash.com</a></em></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>MAC Authentication Bypass - <a href=https://networklessons.com/cisco/ccie-routing-switching-written/mac-authentication-bypass-mab target=_blank rel="noopener noreffer">MAB - networklessons.com</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-07-13</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ data-title="802.1x Port Authentication with ARUBA switches" data-via=_guyevans data-hashtags=802.1X,Radius,Security,Switch,Aruba,Vlan><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ data-hashtag=802.1X><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ data-title="802.1x Port Authentication with ARUBA switches"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ data-title="802.1x Port Authentication with ARUBA switches"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://guy-evans.com/posts/2023-07-11_802-1x-port-authentication-with-aruba-switches/ data-title="802.1x Port Authentication with ARUBA switches" data-image=thomas-jensen-ISG-rUel0Uw-unsplash.jpg><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/802.1x/>802.1X</a>,&nbsp;<a href=/tags/radius/>Radius</a>,&nbsp;<a href=/tags/security/>Security</a>,&nbsp;<a href=/tags/switch/>Switch</a>,&nbsp;<a href=/tags/aruba/>Aruba</a>,&nbsp;<a href=/tags/vlan/>Vlan</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2023-04-23_a-look-at-caddy-a-simple-and-fast-web-server/ class=prev rel=prev title="A look at Caddy - A simple and fast web server"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>A look at Caddy - A simple and fast web server</a>
<a href=/posts/2023-11-26_what-apps-i-use-in-2023/ class=next rel=next title="What Apps I use in 2023">What Apps I use in 2023<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><script data-isso=https://isso.evans.fr/ data-isso-id=thread-id data-isso-css=true data-isso-lang data-isso-reply-to-self=true data-isso-require-author=true data-isso-require-email=false data-isso-avatar=true data-isso-avatar-bg src=https://isso.evans.fr/js/embed.min.js></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://posativ.org/isso/>Isso</a>.</noscript><div><section id=isso-thread></section></div></section></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.121.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Guy Evans</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//matomo.evans.fr/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>